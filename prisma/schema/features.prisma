model Watchlist {
  id        String   @id @default(cuid())
  userId    String   @map("user_id")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  coinId    String   @map("coin_id") // CoinGecko ID
  symbol    String
  name      String
  createdAt DateTime @default(now()) @map("created_at")

  @@unique([userId, coinId])
  @@map("watchlists")
}

model PriceAlert {
  id          String      @id @default(cuid())
  userId      String      @map("user_id")
  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  coinId      String      @map("coin_id")
  targetPrice Float       @map("target_price")
  condition   AlertCondition
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")

  @@map("price_alerts")
}

enum AlertCondition {
  ABOVE
  BELOW
}

model Note {
  id        String   @id @default(cuid())
  userId    String   @map("user_id")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  title     String
  content   String
  coinId    String?  @map("coin_id") // Optional: link to a specific coin
  isPinned  Boolean  @default(false) @map("is_pinned")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("notes")
}

model Tag {
  id        String   @id @default(cuid())
  userId    String   @map("user_id")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  name      String
  color     String   @default("#3b82f6")
  createdAt DateTime @default(now()) @map("created_at")
  
  assets    Asset[]

  @@unique([userId, name])
  @@map("tags")
}
